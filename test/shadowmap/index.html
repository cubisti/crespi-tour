<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/96/three.min.js"></script>
<script src="http://threejs.org/examples/js/controls/OrbitControls.js"></script>
<script src="http://threejs.org/examples/js/renderers/CSS3DRenderer.js"></script>
<script src="https://github.com/mrdoob/three.js/blob/master/src/cameras/OrthographicCamera.js"></script>


<html>
	<head>
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script>

//scene attributs
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 100);
			camera.position.set(5,5,0);
			camera.lookAt(2,0,0);

			var light = new THREE.PointLight( 0xffffff, 1, 100 );
			light.position.set( 0, 1, 15 );
			light.castShadow = true;
			light.shadow.mapSize.width = 512;  // default
			light.shadow.mapSize.height = 512; // default
			light.shadow.camera.near = 0.5;       // default
			light.shadow.camera.far = 500      // default
			scene.add( light );

			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
			renderer.setClearColor( 0xf0f0f0 );
			renderer.shadowMap.enabled = true;
			renderer.shadowMap.type = THREE.PCFSoftShadowMap;
		  renderer.setPixelRatio(devicePixelRatio);

			planeMaterial = new THREE.MeshBasicMaterial({color: 0xCCCCCC});

			planeGeometry = new THREE.PlaneGeometry(300, 300);
			floor = new THREE.Mesh(planeGeometry, planeMaterial);
			floor.rotation.x = -0.5 * Math.PI;
			floor.position.z = 10;
			floor.position.y = 0;
			floor.position.x = 10;
			scene.add(floor);

			var helper = new THREE.CameraHelper( light.shadow.camera );
			scene.add( helper );

//Geometries
			var geometry = new THREE.BoxGeometry( 1, 1, 1 );
			var material = new THREE.MeshLambertMaterial({color: 0xff0000, side: 2, shading: THREE.FlatShading})
			var cube = new THREE.Mesh( geometry, material);
			cube.position.y = 2
			cube.castShadow = true;
			scene.add( cube );

			camera.position.z = 5;

//controls
			var controls = new THREE.OrbitControls( camera, renderer.domElement );
			controls.addEventListener( 'change', function() { renderer.render(scene, camera); } );
			//controls.enableZoom = false;


//------------------------------------------
			var animate = function () {

				requestAnimationFrame( animate );
				//cube.rotation.x += 0.01;
				//cube.rotation.y += 0.01;



				renderer.render( scene, camera );
			};

			animate();

//------------------------------------------
		</script>
	</body>
</html>
